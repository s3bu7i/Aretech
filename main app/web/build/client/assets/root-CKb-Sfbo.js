import{u as O,d as ye,r as l,j as e,O as je}from"./index-b9mOX-ty.js";import{u as _}from"./store-DN2nkw-m.js";import{c as b,P as T,R as Ne,h as be,u as we,F as Ce,D as De,a as ke,b as Re,d as P,C as Me}from"./index-_t69l_HP.js";import{u as A,S as Se}from"./index-DVjGZTE2.js";import{c as Ee,P as w,a as Ie}from"./index-BWEasW5l.js";import{c as y}from"./utils-DnNDQBbQ.js";import{c as h}from"./createLucideIcon-CP5-0Dwr.js";import{J as N,T as Pe}from"./index-BJkUeisO.js";import{f as _e,_ as Oe,L as R,h as Te,M as Ae,j as $e,S as Le}from"./components-i7ntA2Le.js";import{B as Fe}from"./button-BjFBEIeJ.js";import{L as z}from"./leaf-B4xoEMwR.js";import{C as We,a as He}from"./chevron-up-Br7yyuhK.js";import{j as ze}from"./index-VWaDGczM.js";import{u as Be}from"./index-Cw6jCe4l.js";import"./index-DaFgVfeA.js";/**
 * @remix-run/react v2.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */let B="positions";function Ue({getKey:t,...s}){let{isSpaMode:a}=_e(),n=O(),r=ye();Be({getKey:t,storageKey:B});let o=l.useMemo(()=>{if(!t)return null;let i=t(n,r);return i!==n.key?i:null},[]);if(a)return null;let c=((i,d)=>{if(!window.history.state||!window.history.state.key){let m=Math.random().toString(32).slice(2);window.history.replaceState({key:m},"")}try{let f=JSON.parse(sessionStorage.getItem(i)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(m){console.error(m),sessionStorage.removeItem(i)}}).toString();return l.createElement("script",Oe({},s,{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${c})(${JSON.stringify(B)}, ${JSON.stringify(o)})`}}))}function Ge(){const t=_(s=>s.balance);return e.jsxs("header",{className:"flex justify-between items-center p-4 bg-white text-green-600 border-b border-gray-200 sticky top-0 z-50",children:[e.jsx(Ve,{className:"size-8"}),e.jsx("h1",{className:"text-xl font-bold absolute left-1/2 -translate-x-1/2 bg-gradient-to-r from-green-500 to-green-700 text-transparent bg-clip-text",children:"EcoRewards"}),e.jsxs("div",{className:"flex items-center bg-green-100 rounded-full px-3 py-1",children:[e.jsx(qe,{className:"size-4 mr-1"}),e.jsx("span",{className:"text-green-600 font-semibold text-sm",children:t})]})]})}const Ve=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),qe=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})});/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=h("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=h("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=h("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=h("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=h("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=h("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=h("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=h("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=h("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=h("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var $="Dialog",[G,Lt]=Ee($),[at,p]=G($),V=t=>{const{__scopeDialog:s,children:a,open:n,defaultOpen:r,onOpenChange:o,modal:c=!0}=t,i=l.useRef(null),d=l.useRef(null),[m=!1,f]=Re({prop:n,defaultProp:r,onChange:o});return e.jsx(at,{scope:s,triggerRef:i,contentRef:d,contentId:P(),titleId:P(),descriptionId:P(),open:m,onOpenChange:f,onOpenToggle:l.useCallback(()=>f(S=>!S),[f]),modal:c,children:a})};V.displayName=$;var q="DialogTrigger",J=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,r=p(q,a),o=A(s,r.triggerRef);return e.jsx(w.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":W(r.open),...n,ref:o,onClick:b(t.onClick,r.onOpenToggle)})});J.displayName=q;var L="DialogPortal",[ot,Y]=G(L,{forceMount:void 0}),Z=t=>{const{__scopeDialog:s,forceMount:a,children:n,container:r}=t,o=p(L,s);return e.jsx(ot,{scope:s,forceMount:a,children:l.Children.map(n,c=>e.jsx(T,{present:a||o.open,children:e.jsx(ke,{asChild:!0,container:r,children:c})}))})};Z.displayName=L;var M="DialogOverlay",X=l.forwardRef((t,s)=>{const a=Y(M,t.__scopeDialog),{forceMount:n=a.forceMount,...r}=t,o=p(M,t.__scopeDialog);return o.modal?e.jsx(T,{present:n||o.open,children:e.jsx(nt,{...r,ref:s})}):null});X.displayName=M;var nt=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,r=p(M,a);return e.jsx(Ne,{as:Se,allowPinchZoom:!0,shards:[r.contentRef],children:e.jsx(w.div,{"data-state":W(r.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),v="DialogContent",K=l.forwardRef((t,s)=>{const a=Y(v,t.__scopeDialog),{forceMount:n=a.forceMount,...r}=t,o=p(v,t.__scopeDialog);return e.jsx(T,{present:n||o.open,children:o.modal?e.jsx(rt,{...r,ref:s}):e.jsx(it,{...r,ref:s})})});K.displayName=v;var rt=l.forwardRef((t,s)=>{const a=p(v,t.__scopeDialog),n=l.useRef(null),r=A(s,a.contentRef,n);return l.useEffect(()=>{const o=n.current;if(o)return be(o)},[]),e.jsx(Q,{...t,ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:b(t.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=a.triggerRef.current)==null||c.focus()}),onPointerDownOutside:b(t.onPointerDownOutside,o=>{const c=o.detail.originalEvent,i=c.button===0&&c.ctrlKey===!0;(c.button===2||i)&&o.preventDefault()}),onFocusOutside:b(t.onFocusOutside,o=>o.preventDefault())})}),it=l.forwardRef((t,s)=>{const a=p(v,t.__scopeDialog),n=l.useRef(!1),r=l.useRef(!1);return e.jsx(Q,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,i;(c=t.onCloseAutoFocus)==null||c.call(t,o),o.defaultPrevented||(n.current||(i=a.triggerRef.current)==null||i.focus(),o.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:o=>{var d,m;(d=t.onInteractOutside)==null||d.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const c=o.target;((m=a.triggerRef.current)==null?void 0:m.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&r.current&&o.preventDefault()}})}),Q=l.forwardRef((t,s)=>{const{__scopeDialog:a,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:o,...c}=t,i=p(v,a),d=l.useRef(null),m=A(s,d);return we(),e.jsxs(e.Fragment,{children:[e.jsx(Ce,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:o,children:e.jsx(De,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":W(i.open),...c,ref:m,onDismiss:()=>i.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(lt,{titleId:i.titleId}),e.jsx(dt,{contentRef:d,descriptionId:i.descriptionId})]})]})}),F="DialogTitle",ee=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,r=p(F,a);return e.jsx(w.h2,{id:r.titleId,...n,ref:s})});ee.displayName=F;var te="DialogDescription",se=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,r=p(te,a);return e.jsx(w.p,{id:r.descriptionId,...n,ref:s})});se.displayName=te;var ae="DialogClose",oe=l.forwardRef((t,s)=>{const{__scopeDialog:a,...n}=t,r=p(ae,a);return e.jsx(w.button,{type:"button",...n,ref:s,onClick:b(t.onClick,()=>r.onOpenChange(!1))})});oe.displayName=ae;function W(t){return t?"open":"closed"}var ne="DialogTitleWarning",[Ft,re]=Ie(ne,{contentName:v,titleName:F,docsSlug:"dialog"}),lt=({titleId:t})=>{const s=re(ne),a=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return l.useEffect(()=>{t&&(document.getElementById(t)||console.error(a))},[a,t]),null},ct="DialogDescriptionWarning",dt=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${re(ct).contentName}}.`;return l.useEffect(()=>{var o;const r=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");s&&r&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},mt=V,ut=J,pt=Z,ie=X,le=K,ce=ee,de=se,xt=oe;const ht=mt,ft=ut,gt=pt,me=l.forwardRef(({className:t,...s},a)=>e.jsx(ie,{ref:a,className:y("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));me.displayName=ie.displayName;const ue=l.forwardRef(({className:t,children:s,...a},n)=>e.jsxs(gt,{children:[e.jsx(me,{}),e.jsxs(le,{ref:n,className:y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[s,e.jsxs(xt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(st,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ue.displayName=le.displayName;const pe=({className:t,...s})=>e.jsx("div",{className:y("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});pe.displayName="DialogHeader";const xe=({className:t,...s})=>e.jsx("div",{className:y("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});xe.displayName="DialogFooter";const he=l.forwardRef(({className:t,...s},a)=>e.jsx(ce,{ref:a,className:y("text-lg font-semibold leading-none tracking-tight",t),...s}));he.displayName=ce.displayName;const fe=l.forwardRef(({className:t,...s},a)=>e.jsx(de,{ref:a,className:y("text-sm text-muted-foreground",t),...s}));fe.displayName=de.displayName;function vt({onScan:t}){const[s,a]=l.useState(!1);return e.jsxs(ht,{open:s,onOpenChange:a,children:[e.jsx(ft,{asChild:!0,children:e.jsx("button",{className:"absolute left-1/2 -translate-x-1/2 -top-3 p-1 bg-white rounded-full shadow-[0_-3px_3px_-3px_rgba(0,0,0,0.25)]",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 hover:bg-green-400 transition-colors flex items-center justify-center",children:e.jsx(Ye,{className:"h-6 w-6 text-white"})})})}),e.jsxs(ue,{className:"max-h-[calc(100dvh)] h-screen p-0",onInteractOutside:n=>n.preventDefault(),children:[e.jsxs(pe,{children:[e.jsx(he,{}),e.jsx(fe,{})]}),e.jsx("div",{className:"flex items-center w-full h-screen",children:e.jsx(yt,{onScan:n=>{t(n),a(!1)}})}),e.jsx(xe,{className:"sm:justify-start"})]})]})}const yt=({onScan:t})=>{const s=l.useRef(null),[a,n]=l.useState(null),[r,o]=l.useState(null),[c,i]=l.useState(!1),[d,m]=l.useState(null),[f,S]=l.useState([]),[ge,C]=l.useState(!1);l.useEffect(()=>((async(g=void 0)=>{i(!0);try{const u=await navigator.mediaDevices.getUserMedia({video:{deviceId:g?{exact:g}:void 0,facingMode:g?void 0:{ideal:"environment"},width:{ideal:540},height:{ideal:960}}}),E=(await navigator.mediaDevices.enumerateDevices()).filter(D=>D.kind==="videoinput");S(E),s.current&&(s.current.srcObject=u,s.current.play())}catch(u){o("Unable to access the webcam. Please check your device settings."),console.error(u)}i(!1)})(d),()=>{s.current&&s.current.srcObject&&s.current.srcObject.getTracks().forEach(j=>j.stop())}),[d]);const H=async()=>{const x=localStorage.getItem("accessToken");if(!x){N.error("You are not logged in");return}const g=s.current;if(N.success("Captured! Processing..."),C(!0),g){const u=document.createElement("canvas"),j=u.getContext("2d");if(j){u.width=g.videoWidth,u.height=g.videoHeight,j.drawImage(g,0,0,u.width,u.height);const E=u.toDataURL("image/png"),D=await(await fetch(E)).blob();new FormData().append("image",D,"webcam-capture.png");try{const k=await fetch(window.ENV.API_URL+"/api/v1/img",{method:"POST",body:D,headers:{"Content-Type":"application/octet-stream",Authorization:`Bearer ${x}`}});if(!k.ok)throw N.error("Failed to upload image"),C(!1),new Error("Failed to upload image");console.log("Image uploaded successfully");const I=await k.json();if(console.log(I),!I.receipt){N.error("No receipt found in image. Please try again."),C(!1);return}t(I)}catch(k){C(!1),console.error("Error uploading image:",k),N.error("Error uploading image")}}}},ve=x=>{m(x.target.value)};return e.jsxs("div",{className:"flex flex-col items-center",children:[c&&e.jsx("p",{className:"text-black absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center",children:"Loading..."}),f.length>1&&e.jsx("div",{className:"device-selector mt-2",children:e.jsx("select",{id:"device",className:"bg-neutral-100 p-1 ml-1 cursor-pointer absolute top-8 z-[999] left-1/2 -translate-x-1/2 w-1/2",onChange:ve,value:d||"",children:f.map(x=>e.jsx("option",{value:x.deviceId,children:x.label||`Camera ${x.deviceId}`},x.deviceId))})}),e.jsx("video",{ref:s,style:{width:"100svw"},autoPlay:!0,muted:!0,playsInline:!0,onClick:H,className:"hover:opacity-90 cursor-pointer transition-opacity absolute top-0 left-0"}),e.jsx("button",{className:"bg-green-100 p-2 rounded-lg mt-4 hover:bg-green-200 transition-colors absolute bottom-8 left-1/2 -translate-x-1/2",onClick:H,disabled:ge,children:"Capture"}),r&&e.jsx("p",{children:r}),a&&e.jsxs("div",{className:"image-preview",children:[e.jsx("h3",{children:"Captured Image:"}),e.jsx("img",{src:a,alt:"Captured"})]})]})};function jt({onScan:t}){const a=O().pathname;return e.jsx("footer",{className:"sticky bottom-0 bg-white border-t border-gray-200 z-50",children:e.jsxs("div",{className:"flex justify-around items-end px-4 py-4",children:[e.jsxs(R,{to:"/",className:"flex flex-col items-center hover:opacity-60 transition-opacity",children:[e.jsx(Xe,{className:`h-6 w-6 ${a==="/"?"text-green-600":"text-gray-500"}`}),e.jsx("span",{className:"text-xs mt-1 text-gray-500 sr-only",children:"Home"})]}),e.jsxs(R,{to:"/social",className:"flex flex-col items-center hover:opacity-60 transition-opacity",children:[e.jsx(et,{className:`h-6 w-6 ${a==="/social"?"text-green-600":"text-gray-500"}`}),e.jsx("span",{className:"text-xs mt-1 text-gray-500 sr-only",children:"Social"})]}),e.jsx("span",{className:"w-16"}),e.jsxs(R,{to:"/history",className:"flex flex-col items-center hover:opacity-60 transition-opacity",children:[e.jsx(tt,{className:`h-6 w-6 ${a==="/history"?"text-green-600":"text-gray-500"}`}),e.jsx("span",{className:"text-xs mt-1 text-gray-500 sr-only",children:"History"})]}),e.jsxs(R,{to:"/profile",className:"flex flex-col items-center hover:opacity-60 transition-opacity",children:[e.jsx(Ze,{className:`h-6 w-6 ${a==="/profile"?"text-green-600":"text-gray-500"}`}),e.jsx("span",{className:"text-xs mt-1 text-gray-500 sr-only",children:"Profile"})]}),e.jsx(vt,{onScan:t})]})})}function Nt({receiptData:t,onClose:s,className:a}){const[n,r]=l.useState(!1),[o,c]=l.useState(!1);return l.useEffect(()=>{r(!0)},[]),e.jsxs("div",{className:`flex flex-col items-center justify-center bg-gradient-to-b from-green-100 to-green-200 p-4 text-green-800 ${a}`,children:[e.jsxs("div",{className:`w-full max-w-md transform ${n?"scale-100 opacity-100":"scale-95 opacity-0"} transition-all duration-500 ease-out`,children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx(z,{className:"w-24 h-24 mx-auto mb-4 text-green-500"}),e.jsx(Ke,{className:"w-12 h-12 absolute bottom-0 right-0 text-green-600"})]}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Eco-tastic!"}),e.jsx("p",{className:"text-xl mb-4",children:"You've earned"}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(U,{className:"w-6 h-6 mr-2 text-green-500"}),e.jsx("span",{className:"text-5xl font-bold text-green-600",children:t.points.toLocaleString()}),e.jsx(U,{className:"w-6 h-6 ml-2 text-green-500"})]}),e.jsx("p",{className:"text-xl mt-2",children:"green points!"})]}),e.jsxs(Fe,{className:"w-full bg-green-600 text-white hover:bg-green-700 transition-colors duration-200 mb-4",onClick:()=>{s()},children:["Go back to main menu",e.jsx(Me,{className:"w-5 h-5 ml-2"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-auto",children:[e.jsxs("button",{className:"w-full px-4 py-3 flex justify-between items-center bg-green-50 text-green-800 hover:bg-green-100 transition-colors duration-200",onClick:()=>c(!o),children:[e.jsx("span",{className:"font-semibold",children:"More Details"}),o?e.jsx(We,{className:"w-5 h-5"}):e.jsx(He,{className:"w-5 h-5"})]}),o&&e.jsxs("div",{className:"px-4 py-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qe,{className:"w-5 h-5 mr-2 text-green-600"}),e.jsx("span",{className:"font-semibold",children:t.storeName})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Je,{className:"w-5 h-5 mr-2 text-green-600"}),e.jsx("span",{children:t.date})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2 text-green-600"}),e.jsxs("span",{children:["Carbon Footprint: ",t.co2," kg CO2"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Items Purchased:"}),e.jsx("ul",{className:"list-disc list-inside pl-2",children:t.items.map((i,d)=>e.jsxs("li",{children:[i.name," - $",i.price.toFixed(2)]},d))})]}),e.jsxs("div",{className:"font-semibold",children:["Total Cost: $",t.totalCost.toFixed(2)]}),t.generic&&t.sponsoredProducts&&t.sponsoredCost&&t.sponsoredProducts.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Eco-Partner Products:"}),e.jsx("ul",{className:"list-disc list-inside pl-2",children:t.sponsoredProducts.map((i,d)=>e.jsxs("li",{children:[i.name," - $",i.price.toFixed(2)]},d))}),e.jsxs("p",{className:"mt-1 font-semibold",children:["Eco-Partner Total: $",t.sponsoredCost.toFixed(2)]})]}),e.jsxs("div",{className:"font-semibold text-green-600",children:["Points Earned: ",t.points]})]})]})]}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden",children:[...Array(20)].map((i,d)=>e.jsx("div",{className:"absolute rounded-full bg-green-400 opacity-20",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,width:`${Math.random()*10+5}px`,height:`${Math.random()*10+5}px`,animation:`float ${Math.random()*3+2}s linear infinite`}},d))})]})}const Wt=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"}];function Ht({children:t}){const s=Te(),[a,n]=l.useState(null),r=_(i=>i.setBal),o=_(i=>i.setMemberId),c=O();return l.useEffect(()=>{const i=localStorage.getItem("accessToken");if(i){const d=ze(i);o(d.id),console.log("DECODING"),fetch(window.ENV.API_URL+`/api/v1/loyalty/${d.id}/points`,{method:"GET",headers:{Authorization:"Bearer "+i}}).then(m=>m.json()).then(m=>{r(m.balance)})}},[a]),e.jsxs("html",{lang:"en",children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),e.jsx(Ae,{}),e.jsx($e,{})]}),e.jsxs("body",{className:"flex h-screen items-center justify-center relative",children:[e.jsx(Pe,{position:"top-right",richColors:!0,className:"z-[9999]"}),e.jsxs("div",{className:"flex flex-col md:hidden w-full h-full",children:[e.jsx(Ge,{}),a?e.jsx(Nt,{className:"min-h-full flex-1 overflow-auto",receiptData:a,onClose:()=>n(null)}):e.jsx("div",{className:y("flex-1 overflow-auto py-4",{"px-8":c.pathname!=="/history"}),children:t}),e.jsx(jt,{onScan:i=>n(i)})]}),e.jsxs("div",{className:"hidden md:flex flex-col text-center",children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-green-500 to-green-700 text-transparent bg-clip-text",children:"EcoRewards"}),"This site is designed for mobile devices only. Please visit from a mobile device to view this content."]}),e.jsx(Ue,{}),e.jsx("script",{dangerouslySetInnerHTML:{__html:`window.ENV = ${JSON.stringify(s.ENV)}`}}),e.jsx(Le,{})]})]})}function zt(){return e.jsx(je,{})}export{Ht as Layout,zt as default,Wt as links};
